{
  "description": "To check and delete area audit of CAs outside mentioned Location",
  "generationPrompt": "Script Name: CheckAndRemoveAreaAuditOutsideLocation\nExcel Columns: CA_ID, CA_Name, Latitude, Longitude, is_outside_location, area_audit_status, area_audit_api_response\n\nOUTPUT MAPPING CONFIGURATION:\n- UI Output Definition:\n- UI Column 'ID': Set to 'CA_ID' (Logic: from excel column 'CA_ID')\n- UI Column 'Name': Set to 'CA_Name' (Logic: from excel column 'CA_Name')\n- UI Column 'Status': Set to 'Success or Fail ' (Logic: Success if response attribute 'cropAudited' = false\nFail if  response attribute 'cropAudited' = true)\n- UI Column 'Response': Set to 'cropAudited =  true or cropAudited =  false ' (Logic: put the response attribute cropAudited and its value as 'cropAudited =  false' or 'cropAudited =  true'........)\n- Excel Output Definition:\n   - Column 'is_outside_india': Set to '' (Logic: depending on the result of Embedded India Polygon Check - Ray Casting)\n   - Column 'area_audit_status': Set to '' (Logic: Success if response attribute 'cropAudited' = false\nFail if  response attribute 'cropAudited' = true)\n   - Column 'area_audit_api_response': Set to '' (Logic: put the response attribute cropAudited and its value)\nIMPORTANT: Include this configuration as a comment block at the top of the generated Python script for reference.\n\nStep 1 [LOGIC]:\n  - Logic: Use embedded simplified polygon coordinates (Ray Casting logic) of the location provided by user instead of downloading shapefiles. Use google API for finding the location.\n\nStep 2 [LOGIC]:\n  - Logic: Read input Excel, validate each row using the Latitude and Longitude columns.\n\nStep 3 [LOGIC]:\n  - Logic: Implement a 'is_point_in_polygon(lat, lon, polygon)' function using Ray Casting algorithm. Check if each point is outside the embedded locations's geometry. If the point is outside, mark column 'is_outside_location' as 'Yes' in excel, otherwise mark it as 'No'\n\nStep 4 [API]:\n  - Step/Variable Name: Delete Croppable Area Audit\n  - Call DELETE /services/farm/api/croppable-areas/{ca_id}/area-audit\n  - Payload Type: QUERY\n  - Expected Response: {  \"id\" : 16810,  \"cropUnits\" : 0,  \"name\" : \"RS not enabled Async Feature 2 A\",  \"expectedHarvestDate\" : null,  \"expectedQuantity\" : null,  \"organic\" : null,  \"status\" : \"ACCEPTED\",  \"cropexCropCode\" : null,  \"sowingDate\" : \"2026-01-01T00:00:00Z\",  \"cropAudited\" : false,  \"pruningDate\" : null,  \"data\" : {    \"location\" : \"///\",    \"ca-area-audit\" : null,    \"areaAuditNickName\" : null  },  \"projectId\" : 16551,  \"projectName\" : \"Rs Pr Async 2\",  \"landId\" : 16660,  \"landName\" : \"RS not enabled Async Feature 2 A\",  \"varietyId\" : null,  \"varietyName\" : null,  \"actualCropStageId\" : null,  \"actualCropStageName\" : null,  \"expectedCropStageId\" : null,  \"expectedCropStageName\" : null,  \"cropId\" : null,  \"cropName\" : null,  \"srCropId\" : null,  \"varietySrCropId\" : null,  \"varietySrCropCode\" : null,  \"ownerId\" : 6401,  \"ownerFirstName\" : \"RS PR Enable Filter F 3\",  \"landSoilTypeName\" : \"Black\",  \"landIrrigationTypeName\" : \"Basin Irrigation\",  \"auditedArea\" : null,  \"usableArea\" : {    \"count\" : 1.0  },  \"declaredArea\" : {    \"count\" : 1.0  },  \"orderNumber\" : null,  \"tasks\" : [ ],  \"cropUnitList\" : [ ],  \"massUploadUserId\" : null,  \"images\" : null,  \"splitBy\" : null,  \"splitDate\" : null,  \"lastModifiedDate\" : \"2026-02-02T07:55:41.614Z\",  \"externalId\" : null,  \"assignedToFarmerIds\" : null,  \"assignedToFarmerNames\" : null,  \"userNames\" : null,  \"planTypeId\" : null,  \"planTypeName\" : null,  \"detailingStatus\" : \"ONGOING\",  \"clientId\" : \"8593944b-da96-473d-85cc-ad737cb05c26\",  \"reestimatedDate\" : null,  \"reestimatedValue\" : null,  \"receivedHarvest\" : 0.0,  \"hasTaskStarted\" : false,  \"latitude\" : null,  \"longitude\" : null,  \"altitude\" : null,  \"areaAudit\" : null,  \"plotScore\" : 0,  \"farmerCode\" : \"RSPREFF3\",  \"topFieldAlertName\" : null,  \"topReportedLoss\" : null,  \"lossReported\" : null,  \"nameCounter\" : null,  \"reasonId\" : null,  \"reasonName\" : null,  \"projectAssetId\" : 16760,  \"srPlotId\" : null,  \"farmerCropId\" : null,  \"userIds\" : null,  \"acreSquareCaId\" : null,  \"split\" : false,  \"landClientId\" : \"8d987fda-1b26-4a34-ba86-b15cbc27dc10\",  \"ownerClientId\" : \"6a5c5afe-7e8b-4408-beb6-bc9c2fe1b656\",  \"projectClientId\" : \"780298f0-d325-4907-a83f-51802566ea1e\",  \"deleted\" : false,  \"massUpload\" : false,  \"plotClosure\" : false,  \"isIgnoreTaskStarted\" : false}\n  - Instructions: For each row where 'is_outside_location' is 'YES', call DELETE API using 'row['CA_ID']'. Record status and API response.\n\n",
  "inputColumns": [
    "CA_ID",
    "CA_Name",
    "Latitude",
    "Longitude",
    "is_outside_location",
    "area_audit_status",
    "area_audit_api_response"
  ],
  "team": "CS",
  "groupByColumn": "",
  "isMultithreaded": true,
  "enableGeofencing": true,
  "batchSize": 10,
  "outputConfig": {
    "uiMapping": [
      {
        "colName": "ID",
        "value": "CA_ID",
        "logic": "from excel column 'CA_ID'"
      },
      {
        "colName": "Name",
        "value": "CA_Name",
        "logic": "from excel column 'CA_Name'"
      },
      {
        "colName": "Status",
        "value": "Success or Fail ",
        "logic": "Success if response attribute 'cropAudited' = false\nFail if  response attribute 'cropAudited' = true"
      },
      {
        "colName": "Response",
        "value": "cropAudited =  true or cropAudited =  false ",
        "logic": "put the response attribute cropAudited and its value as 'cropAudited =  false' or 'cropAudited =  true'........"
      }
    ],
    "aiInstructions": "",
    "excelMapping": [
      {
        "colName": "is_outside_india",
        "value": "",
        "logic": "depending on the result of Embedded India Polygon Check - Ray Casting"
      },
      {
        "colName": "area_audit_status",
        "value": "",
        "logic": "Success if response attribute 'cropAudited' = false\nFail if  response attribute 'cropAudited' = true"
      },
      {
        "colName": "area_audit_api_response",
        "value": "",
        "logic": "put the response attribute cropAudited and its value"
      }
    ],
    "isDynamicUI": true
  },
  "mtime": 1770055722060
}